import argparse
import matplotlib.pyplot as plt


def plot_per_turn_number(args):
    if args.dataset_name == "TopiOCQA":
        max_turn_num = 16
        y_r100 = {
            "Original": [0.6439024390243903, 0.07804878048780488, 0.02926829268292683, 0.014634146341463415, 0.024390243902439025, 0.04390243902439024, 0.03902439024390244, 0.02926829268292683, 0.03414634146341464, 0.06341463414634146, 0.040268456375838924, 0.07017543859649122, 0.06741573033707865, 0.03389830508474576, 0.046511627906976744, 0.0],
            "All History": [0.6439024390243903, 0.5414634146341464, 0.34146341463414637, 0.24878048780487805, 0.15609756097560976, 0.11707317073170732, 0.06829268292682927, 0.05853658536585366, 0.04878048780487805, 0.01951219512195122, 0.006711409395973154, 0.008771929824561403, 0.011235955056179775, 0.01694915254237288, 0.0, 0.0],
            "Same Topic": [0.6439024390243903, 0.4975609756097561, 0.33658536585365856, 0.21951219512195122, 0.1951219512195122, 0.18048780487804877, 0.14146341463414633, 0.13170731707317074, 0.16585365853658537, 0.14146341463414633, 0.087248322147651, 0.11403508771929824, 0.0898876404494382, 0.15254237288135594, 0.13953488372093023, 0.2],
            "T5RQ": [0.6341463414634146, 0.5707317073170731, 0.5609756097560976, 0.4585365853658537, 0.375609756097561, 0.3121951219512195, 0.3024390243902439, 0.2975609756097561, 0.2975609756097561, 0.23414634146341465, 0.22818791946308725, 0.2719298245614035, 0.25842696629213485, 0.2033898305084746, 0.23255813953488372, 0.1],
            "ConvGQR": [0.5219512195121951, 0.5414634146341464, 0.5219512195121951, 0.47804878048780486, 0.47804878048780486, 0.4634146341463415, 0.34146341463414637, 0.375609756097561, 0.4146341463414634, 0.28292682926829266, 0.3288590604026846, 0.4649122807017544, 0.30337078651685395, 0.23728813559322035, 0.3953488372093023, 0.4] 
        }
    
    x = range(1, max_turn_num+1)
    plt.figure()
    for label, value in y_r100.items():
        plt.plot(x, value, label=label)
    
    plt.title(f'Dataset: {args.dataset_name}')
    plt.xlabel('Turn Number')
    plt.ylabel('Recall@100')
    plt.legend()
    plt.tight_layout()

    plt.show()


if __name__ == "__main__":
    parser = argparse.ArgumentParser()
    parser.add_argument("--dataset_name", type=str, default="TopiOCQA", choices=["QReCC", "TopiOCQA", "INSCIT"])
    args = parser.parse_args()
    
    plot_per_turn_number(args)